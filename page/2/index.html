<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>mrh929&#39;s home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="mrh929&#39;s home">
<meta property="og:url" content="http://mrh1s.top/page/2/index.html">
<meta property="og:site_name" content="mrh929&#39;s home">
<meta property="og:description" content="Blog">
<meta property="og:locale" content="cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mrh929&#39;s home">
<meta name="twitter:description" content="Blog">
  
    <link rel="alternate" href="/atom.xml" title="mrh929&#39;s home" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mrh929&#39;s home</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://mrh1s.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-wakarimasu" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/15/wakarimasu/" class="article-date">
  <time datetime="2019-02-15T08:31:00.000Z" itemprop="datePublished">2019-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/write-up/">write up</a>►<a class="article-category-link" href="/categories/write-up/hgame-20190122/">hgame_20190122</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/15/wakarimasu/">wakarimasu</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="/uploads/wakarimasu.7z">wakarimasu</a> 本质是解两个矩阵，一个是乘法矩阵求逆，另外一个仅仅是矩阵的加减 由于矩阵求逆的时候存在小数精度问题，故用计算机算出来的值不会精确到整数，但是一旦你看到那个结果就一定会知道你算对了 算矩阵的网站： <a href="https://zh.numberempire.com/matrixcalculator.php" target="_blank" rel="noopener">https://zh.numberempire.com/matrixcalculator.php</a> <a href="https://zh.numberempire.com/matrixbinarycalculator.php" target="_blank" rel="noopener">https://zh.numberempire.com/matrixbinarycalculator.php</a> A = 8 1 7 1 1 0 4 8 1 2 3 9 3 8 6 6 4 8 3 5 7 8 8 7 0 9 0 2 3 4 2 3 2 5 4 0 B = 122 207 140 149 142 168 95 201 122 145 136 167 112 192 127 137 134 147 95 207 110 134 133 173 136 212 160 162 152 179 121 193 126 126 119 147 c = 16 8 8 14 6 11 5 23 5 10 12 23 14 23 19 7 8 10 4 13 22 17 11 22 6 14 2 11 18 9 5 8 8 10 16 13 X1 * B = A X2 + B = C X1=AB^-1 = 5.999951 5.999888 6.000136 5.999828 5.999879 7.000097 2.999953 4.999902 7.000126 5.999842 5.999886 6.000086 5.999953 4.999893 4.000127 5.99984 6.99989 7.000089 2.999956 6.999908 5.000125 5.999846 6.999877 5.000089 6.999948 5.999879 7.000144 6.999816 4.999875 7.000104 6.999956 5.999896 6.000123 2.999842 5.999887 7.000091 x2 = C - B = 8 7 1 13 5 11 1 15 4 8 9 14 11 15 13 1 4 2 1 8 15 9 3 15 6 5 2 9 15 5 3 5 6 5 12 13 再将X1与X2结合（X1为高四位，X2为低四位）</p>
<pre><code>#include&lt;cstdio&gt;
int a[]={6,6,6,6,6,7,3,5,7,6,6,6,6,5,4,6,7,7,3,7,5,6,7,5,7,6,7,7,5,7,7,6,6,3,6,7};
int b[]={8,7,1,13,5,11,1,15,4,8,9,14,11,15,13,1,4,2,1,8,15,9,3,15,6,5,2,9,15,5,3,5,6,5,12,13};

int main(){
    for(int i = 0; i &lt;= 35; i++)
        printf(&quot;%c&quot;, (a[i]&lt;&lt;4) + b[i]);

}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2019/02/15/wakarimasu/" data-id="cjv80bewz001va0et03m096ev" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RE-Static/">RE_Static</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-fat16-e6-96-87-e4-bb-b6-e7-b3-bb-e7-bb-9f" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/04/fat16-e6-96-87-e4-bb-b6-e7-b3-bb-e7-bb-9f/" class="article-date">
  <time datetime="2019-02-04T10:06:10.000Z" itemprop="datePublished">2019-02-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/04/fat16-e6-96-87-e4-bb-b6-e7-b3-bb-e7-bb-9f/">FAT16文件系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h2><p><a href="https://blog.csdn.net/sikuon/article/details/75939434" target="_blank" rel="noopener">https://blog.csdn.net/sikuon/article/details/75939434</a> <a href="https://blog.csdn.net/cassie_huang/article/details/62227023" target="_blank" rel="noopener">https://blog.csdn.net/cassie_huang/article/details/62227023</a> <a href="https://blog.csdn.net/yeruby/article/details/41978199" target="_blank" rel="noopener">https://blog.csdn.net/yeruby/article/details/41978199</a> 最详细：<a href="https://blog.csdn.net/mj5742356/article/details/20125511" target="_blank" rel="noopener">https://blog.csdn.net/mj5742356/article/details/20125511</a> 长短文件名 <a href="https://wenku.baidu.com/view/d729d62a680203d8cf2f2474.html" target="_blank" rel="noopener">https://wenku.baidu.com/view/d729d62a680203d8cf2f2474.html</a></p>
<h1 id="FAT16"><a href="#FAT16" class="headerlink" title="FAT16"></a>FAT16</h1><h5 id="一、关于需要掌握的基础知识"><a href="#一、关于需要掌握的基础知识" class="headerlink" title="一、关于需要掌握的基础知识"></a>一、关于需要掌握的基础知识</h5><p> 1.文件读写与文件指针的移动操作 ​ 2.十六进制计算 ​ 3.链表 ​ 4.小端序</p>
<h5 id="二、FAT16文件系统的结构"><a href="#二、FAT16文件系统的结构" class="headerlink" title="二、FAT16文件系统的结构"></a>二、FAT16文件系统的结构</h5><p> <strong>1.</strong>FAT16第一个扇区是DBR，是对整个分区的格式及参数进行说明的部分，从中可以读取到FAT所占扇区数、每簇扇区数、每个扇区的字节数、保留扇区数…… ​ 系统通过这些参数可以计算出FAT1、FAT2、根目录、数据区的位置，其中，保留扇区之后的即为FAT区，FAT区由两个完全相同的FAT1、FAT2构成，FAT2作为FAT1的一个备份，保障数据安全。 ​ </p>
<p><strong>2.</strong>FAT1中存放了每个簇之间的对应关系以及自身的属性。 ​ FAT2是FAT1的一个备份，以便于磁盘意外损坏的恢复 ​ 通过查表我们可以了解到这个簇到底是未被使用还是已被使用，以及这个簇后面还有没有链接到下一个簇。从而将连续的数据离散储存。 ​</p>
<p> <strong>3.</strong>FAT2后的是根目录，根目录占用32个扇区，当中储存了根节点下面所拥有的所有文件和文件夹（文件夹可以当作一种特殊的文件），每个文件占用32个字节（当文件名过长的时候可能会占用更多空间），这32个字节分别对应的是这个文件对应的各种属性以及簇号。 ​ 我们可以通过寻找该簇来读取该文件的具体内容，如果是文件夹，这个簇中储存的是文件夹内的所有子目录元素（与根目录的作用类似）。 ​ 文件夹创建的时候会生成两个32字节的项 ​ 一个是 “.” ，其中储存的是文件夹自身的信息 ​ 另一个是 “..”， 储存了这个文件夹的父目录的信息（方便返回上一级）</p>
<h5 id="三、删除文件（夹）的过程"><a href="#三、删除文件（夹）的过程" class="headerlink" title="三、删除文件（夹）的过程"></a>三、删除文件（夹）的过程</h5><p> 找到描述该文件的那个32字节的项，将偏移值为0h的数据改为 E5，以说明该数据被删除。如果是文件夹的话，还应递归删除其目录下的所有文件。</p>
<h5 id="四、创建文件（夹）的过程"><a href="#四、创建文件（夹）的过程" class="headerlink" title="四、创建文件（夹）的过程"></a>四、创建文件（夹）的过程</h5><p> 在当前目录的簇下寻找一个空位置（32字节） 将新文件（夹）的信息写入，并且在磁盘中寻找一个未使用的新簇，将其分配给创建的文件（夹）</p>
<h5 id="五、读取文件（夹）的过程"><a href="#五、读取文件（夹）的过程" class="headerlink" title="五、读取文件（夹）的过程"></a>五、读取文件（夹）的过程</h5><p> 读取文件（夹）所对应的32字节数据，从而读取到整个文件的信息尤其是簇号，根据这个簇号去磁盘中的相应区域读取这个文件（夹）所储存的信息（文件）</p>
<h5 id="六、写入文件的过程"><a href="#六、写入文件的过程" class="headerlink" title="六、写入文件的过程"></a>六、写入文件的过程</h5><p> 类似于读取文件</p>
<h5 id="七、遇到当前簇满的处理措施"><a href="#七、遇到当前簇满的处理措施" class="headerlink" title="七、遇到当前簇满的处理措施"></a>七、遇到当前簇满的处理措施</h5><p> 在磁盘中寻找一个新簇，将原来的簇指向新簇，从而将两个簇连接在一起，形成一个连续的数据区域 <strong>八、注意事项</strong> ​ <strong>1.文件系统中的数据以小端序保存（数字的低位 存在 地址的低位上，这与普通人的思维有所区别）</strong> ​ e.g. 数据1234h， 用两个字节进行存储，则其在内存中的存储形式为： 34 12 ​ <strong>2.DBR(DOS boot record) 占一个扇区，里面储存了整个文件系统的各种配置信息（如每个扇区的字节数，每个簇的扇区数，FAT区的个数，每个FAT所占扇区数等等）</strong> ​ <strong>3.FAT表中每个记录的位数成为FAT大小（fat16就代表一个簇的簇号所占空间为十六位，两个字节），这意味着一个fat16磁盘最多能储存20000h个簇，也就限制了fat16的一个分区的大小</strong></p>
<h5 id="八、相关图表"><a href="#八、相关图表" class="headerlink" title="八、相关图表"></a>八、相关图表</h5><h3 id="FAT16记录表（可先记录一下自己磁盘的如下信息，方便之后的分析，以下只是我自己SD卡的信息）"><a href="#FAT16记录表（可先记录一下自己磁盘的如下信息，方便之后的分析，以下只是我自己SD卡的信息）" class="headerlink" title="FAT16记录表（可先记录一下自己磁盘的如下信息，方便之后的分析，以下只是我自己SD卡的信息）"></a>FAT16记录表（可先记录一下自己磁盘的如下信息，方便之后的分析，以下只是我自己SD卡的信息）</h3><p>对于FAT16的一个分区： 每簇占多少个扇区：64 DBR（保留扇区数）0h FAT1（FAT扇区数）：标记某个簇的状态（已使用 未使用 坏簇），以两个字节为一个单位。 1000h FAT2（FAT扇区数）：与FAT1完全一样，作为FAT1的备份 1D800h 根目录（32个扇区） 3C000h 数据区（第二个簇） 40000h 第五个簇58000h 第六个簇60000h</p>
<h3 id="DBR数据对照表"><a href="#DBR数据对照表" class="headerlink" title="DBR数据对照表"></a>DBR数据对照表</h3><p><a href="https://i.loli.net/2019/02/11/5c61041e5ed79.png" title="DBR数据对照表" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/02/11/5c61041e5ed79.png" alt="DBR数据对照表" title="DBR数据对照表"></a> <strong>注意：1Ch: 20为文件 10为文件夹</strong></p>
<h3 id="文件信息对照表"><a href="#文件信息对照表" class="headerlink" title="文件信息对照表"></a>文件信息对照表</h3><p><a href="https://i.loli.net/2019/02/11/5c61043476270.png" title="文件信息对照表1" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/02/11/5c61043476270.png" alt="文件信息对照表1" title="文件信息对照表1"></a> <a href="https://i.loli.net/2019/02/11/5c61043de77ac.png" title="文件信息对照表2" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/02/11/5c61043de77ac.png" alt="文件信息对照表2" title="文件信息对照表2"></a></p>
<h3 id="系统时间与文件系统中的时间的换算"><a href="#系统时间与文件系统中的时间的换算" class="headerlink" title="系统时间与文件系统中的时间的换算"></a><strong>系统时间与文件系统中的时间的换算</strong></h3><pre><code>1.0x16~0x17中的时间=小时*2048+分钟*32+秒/2。
得出的结果换算成16进制填入即可。
也就是：
0x16字节的0~4位是以2秒为单位的量值；
0x16字节的5~7位和0x17字节的0~2位是分钟；
0x17字节的3~7位是小时。

2.0x18~0x19中的日期=(年份-1980)*512+月份*32+日。
得出的结果换算成16进制填入即可。
也就是：
0x18字节0~4位是日期数；
0x18字节5~7位和0x19字节0位是月份；
0x19字节的1~7位为年号，
原定义中0~119分别代表1980~2099，
目前高版本的Windows允许取0~127，即年号最大可以到2107年。
</code></pre><h3 id="FAT16簇空间大小与分区空间大小的关系"><a href="#FAT16簇空间大小与分区空间大小的关系" class="headerlink" title="FAT16簇空间大小与分区空间大小的关系"></a>FAT16簇空间大小与分区空间大小的关系</h3><p>表9 FAT16分区大小与对因簇大小</p>
<p>分区空间大小</p>
<p>每个簇的扇区</p>
<p>簇空间大小</p>
<p>0MB-32MB</p>
<p>1</p>
<p>512个字节</p>
<p>33MB-64MB</p>
<p>2</p>
<p>1k</p>
<p>65MB-128MB</p>
<p>4</p>
<p>2k</p>
<p>129MB-225MB</p>
<p>8</p>
<p>4k</p>
<p>256MB-511MB</p>
<p>16</p>
<p>8k</p>
<p>512MB-1023MB</p>
<p>32</p>
<p>16k</p>
<p>1024MB-2047MB</p>
<p>64</p>
<p>32k</p>
<p>2048MB-4095MB</p>
<p>128</p>
<p>64k</p>
<p><strong>文件操作函数：</strong> fseek函数可以把位置指针调整到文件任意位置 fseek函数里需要提供一个基准位置和目标位置到基准位置间的距离，计算机根据他们计算出目标位置 SEEK_SET 0 把文件头作为基准位置 SEEK_CUR 1 把当前位置作为基准位置 SEEK_END 2 把文件尾作为基准位置</p>
<blockquote>
<p>以下为完整代码： 程序结构设计有一点毛病，本来簇在读入程序之后可以切割成若干个32字节的块，方便操作。结果我把一个簇当成字符串处理了，所以写了很多个字符串操作函数</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FALSE 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ISCMD(t) strcmp(a, t) == 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> COMMAND_MAX 100</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SECTORS_PER_CLUST 1<span class="comment">//每簇扇区数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BYTES_PER_SECTOR 512<span class="comment">//每扇区字节数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SECTORS_PER_FAT 128<span class="comment">//每FAT扇区数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RESERVED_SECTORS 1<span class="comment">//保留扇区数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SECTORS_ROOT SECTORS_PER_CLUST<span class="comment">//根目录的扇区数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLUST_MAX_COUNT (SECTORS_PER_FAT * BYTES_PER_SECTOR &gt;&gt; 1) <span class="comment">//簇的总个数 </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ROOT (RESERVED_SECTORS + SECTORS_PER_FAT * 2) * BYTES_PER_SECTOR<span class="comment">//根目录的位置</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLUST_SECOND ROOT + SECTORS_ROOT * BYTES_PER_SECTOR<span class="comment">//第二个簇的位置 </span></span></span><br><span class="line">FILE *fp;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">clu</span>&#123;</span><span class="comment">//一个簇 </span></span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line">    <span class="keyword">char</span> byte[BYTES_PER_SECTOR * SECTORS_PER_CLUST + <span class="number">10</span>]; <span class="comment">//簇里的扇区 </span></span><br><span class="line">&#125;clust[CLUST_MAX_COUNT];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">fi</span>&#123;</span><span class="comment">//一个文件 </span></span><br><span class="line">    <span class="keyword">bool</span> dir;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">2</span>][<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">int</span> time;<span class="comment">//修改时间 </span></span><br><span class="line">    <span class="keyword">int</span> date;<span class="comment">//修改日期 </span></span><br><span class="line">    <span class="keyword">int</span> clust;<span class="comment">//首簇号</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> len;<span class="comment">//文件大小</span></span><br><span class="line">    fi *next;<span class="comment">//下一个文件 </span></span><br><span class="line">&#125;file[<span class="number">1</span> + CLUST_MAX_COUNT * SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>];</span><br><span class="line"><span class="keyword">int</span> FileCnt, Clust_now;<span class="comment">//当前文件的总个数与当前的簇 </span></span><br><span class="line">fi *HEAD;<span class="comment">//头指针 </span></span><br><span class="line"><span class="keyword">char</span> dir[<span class="number">10000</span>][<span class="number">6</span>];<span class="comment">//存放所有文件夹名字的数组</span></span><br><span class="line"><span class="keyword">int</span> dir_now; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Manu_Print</span><span class="params">()</span></span>;<span class="comment">//打印帮助菜单</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Command_Read</span><span class="params">()</span></span>;<span class="comment">//读取命令 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Data_ReadOrWrite</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span>)</span></span>;<span class="comment">//文件操作，读、写、关闭</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Initialize</span><span class="params">()</span></span>;<span class="comment">//初始化数据文件</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Create_New</span><span class="params">()</span></span>;<span class="comment">//创建新的类FAT16数据文件</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Read</span><span class="params">()</span></span>;<span class="comment">//将数据读入内存 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Save</span><span class="params">()</span></span>;<span class="comment">//保存文件 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_DBR_Print</span><span class="params">()</span></span>;<span class="comment">//创建DBR</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Add_A_File</span><span class="params">(fi *, <span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;<span class="comment">//将clust中指定位置的字符串填充为新文件的信息 </span></span><br><span class="line"></span><br><span class="line"><span class="function">fi *<span class="title">Filelist_Search_File</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">bool</span>)</span></span>;<span class="comment">//在已经读入的文件中寻找对应名称的文件 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Update</span><span class="params">(<span class="keyword">int</span>)</span></span>;<span class="comment">//更新文件列表 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Destroy</span><span class="params">()</span></span>;<span class="comment">//文件列表清空 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Add_File</span><span class="params">(fi *)</span></span>;<span class="comment">//在文件列表中加入一个元素 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Bubble_Sort</span><span class="params">()</span></span>;<span class="comment">//用冒泡排序把文件列表按照字典序排序</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Print</span><span class="params">()</span></span>;<span class="comment">//打印出所有的文件 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_Number</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>, <span class="keyword">int</span>)</span></span>;<span class="comment">//以小端序方式打印 (对文件)</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">File_Scanf_Number</span><span class="params">(<span class="keyword">int</span>)</span></span>;<span class="comment">//读取n个字节的小端序数字</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_String</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">int</span>)</span></span>;<span class="comment">//以字符串向文件输出信息 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_32Bytes</span><span class="params">(fi *)</span></span>;<span class="comment">//向文件中输出文件/文件夹的信息</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Printf_Number</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">long</span> <span class="keyword">long</span>, <span class="keyword">int</span>)</span></span>;<span class="comment">//以小端序方式打印 (对字符串)</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">Str_Scanf_Number</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">int</span>)</span></span>;<span class="comment">//读取n个字节的小端序数字</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Scanf_String</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">int</span>, <span class="keyword">char</span> *)</span></span>;<span class="comment">//以二进制格式读取字符串的内容 </span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Str_Read_32Bytes</span><span class="params">(<span class="keyword">char</span> *, fi *)</span></span>;<span class="comment">//读取一个文件/文件夹的信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Printf_32Bytes</span><span class="params">(<span class="keyword">char</span> *, fi *)</span></span>;<span class="comment">//向字符串中输出文件/文件夹的信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Cut_Name_Into_Two</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">char</span>*, <span class="keyword">char</span>*)</span></span>;<span class="comment">//将一个文件名分隔为两部分 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Clust_Judge_Status</span><span class="params">(<span class="keyword">int</span>)</span></span>; <span class="comment">//判断该簇的状态 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Time_Print</span><span class="params">(<span class="keyword">int</span> t)</span></span>;<span class="comment">//输出时间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Date_Print</span><span class="params">(<span class="keyword">int</span> t)</span></span>;<span class="comment">//输出日期 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Time_Get</span><span class="params">()</span></span>;<span class="comment">//获取当前时间 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Date_Get</span><span class="params">()</span></span>;<span class="comment">//获取当前日期 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dir_Change</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">bool</span>)</span></span>;<span class="comment">//更改目录位置 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dir_Print</span><span class="params">()</span></span>;<span class="comment">//打印当前目录</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Dir_Find_Empty</span><span class="params">(<span class="keyword">int</span>)</span></span>;<span class="comment">//在一个簇里面寻找空的位置 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Make_a_New_File</span><span class="params">(fi *, <span class="keyword">bool</span>)</span></span>;<span class="comment">//返回一个创建好的空文件 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Clust_Clear_File</span><span class="params">(<span class="keyword">int</span>)</span></span>;<span class="comment">//清理某个簇内的文件的所有信息 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Clust_Clear_Dir</span><span class="params">(<span class="keyword">int</span>)</span></span>;<span class="comment">//清理某个簇内的所有文件夹 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Data_Initialize();</span><br><span class="line">    Manu_Print();</span><br><span class="line">    <span class="keyword">bool</span> FLAG = FALSE;</span><br><span class="line">    <span class="keyword">char</span> rt[<span class="number">6</span>] = <span class="string">"root:"</span>;</span><br><span class="line">    dir_now = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">strcpy</span>(dir[dir_now], rt);</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        Dir_Print();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"&gt;"</span>);</span><br><span class="line">        FLAG = Command_Read();</span><br><span class="line">    &#125;<span class="keyword">while</span>(FLAG);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Command_Read</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[COMMAND_MAX], a[COMMAND_MAX], b[COMMAND_MAX];</span><br><span class="line">    gets(str);</span><br><span class="line">    <span class="built_in">sscanf</span>(str, <span class="string">"%s%s"</span>, a, b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(str[<span class="number">0</span>] == <span class="number">0</span>) <span class="keyword">return</span> TRUE;</span><br><span class="line"></span><br><span class="line">    Filelist_Destroy();</span><br><span class="line">    Filelist_Update(Clust_now);</span><br><span class="line"></span><br><span class="line">    Filelist_Bubble_Sort();</span><br><span class="line">    <span class="keyword">if</span>(ISCMD(<span class="string">"ls"</span>) || ISCMD(<span class="string">"dir"</span>))&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">        Dir_Print();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" contains the following files or directories:\n"</span>);</span><br><span class="line">        Filelist_Print();</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"cd"</span>))&#123;</span><br><span class="line">        <span class="keyword">char</span> temp[<span class="number">20</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(temp, b);</span><br><span class="line">        fi *t = Filelist_Search_File(temp, TRUE);</span><br><span class="line">        <span class="keyword">if</span>(t != <span class="literal">NULL</span> &amp;&amp; t-&gt;dir == TRUE)&#123;</span><br><span class="line">            Clust_now = t-&gt;clust;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(b, <span class="string">".."</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(dir_now != <span class="number">0</span>)</span><br><span class="line">                    Dir_Change(b, FALSE);<span class="comment">//回退</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(b, <span class="string">"."</span>) != <span class="number">0</span>)</span><br><span class="line">                Dir_Change(b, TRUE);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Invalid directory!\n\n"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"mkdir"</span>))&#123;</span><br><span class="line">        fi *t = Filelist_Search_File(b, TRUE);</span><br><span class="line">        <span class="keyword">if</span>(t != <span class="literal">NULL</span>)&#123;<span class="comment">//如果这个文件夹已经存在，就返回错误</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Directory already exists!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strlen</span>(b) &gt;= <span class="number">8</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Name too long!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> Clust_temp = Clust_now;</span><br><span class="line">        <span class="keyword">int</span> k = Dir_Find_Empty(Clust_temp);</span><br><span class="line">        <span class="keyword">while</span>(k == <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(Clust_Judge_Status(clust[Clust_temp].status) == <span class="number">0</span>)</span><br><span class="line">                Clust_temp = clust[Clust_temp].status;<span class="comment">//如果这个链表的其他簇还有空位 </span></span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> Clust_new = <span class="number">2</span>;<span class="comment">//这个链表中已经不存在空位了，要找一个空簇，从第二个簇开始找 </span></span><br><span class="line">                <span class="keyword">while</span>(clust[Clust_new].status != <span class="number">0</span>) Clust_new++;</span><br><span class="line">                clust[Clust_temp].status = Clust_new;</span><br><span class="line">                clust[Clust_new].status = <span class="number">0xFFFF</span>;</span><br><span class="line">                Clust_temp = Clust_new;</span><br><span class="line">            &#125;</span><br><span class="line">            k = Dir_Find_Empty(Clust_temp);<span class="comment">//重新寻找空位 </span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fi *F = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));<span class="comment">//填充基本信息 </span></span><br><span class="line">        Make_a_New_File(F, TRUE);</span><br><span class="line">        clust[Clust_temp].status = <span class="number">0xFFFF</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(F-&gt;name[<span class="number">0</span>], b);<span class="comment">//修改文件夹名称 </span></span><br><span class="line">        Data_Add_A_File(F, Clust_temp, k);<span class="comment">//把文件写入簇 </span></span><br><span class="line"></span><br><span class="line">        fi *temp = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));<span class="comment">//再拿一个临时变量</span></span><br><span class="line">        Make_a_New_File(temp, TRUE);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> *p = clust[F-&gt;clust].byte;</span><br><span class="line">        <span class="built_in">strcpy</span>(temp-&gt;name[<span class="number">0</span>], <span class="string">"."</span>);</span><br><span class="line">        temp-&gt;clust = F-&gt;clust; <span class="comment">// .文件夹用于存放本文件夹的信息</span></span><br><span class="line">        Str_Printf_32Bytes(p, temp);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">strcpy</span>(temp-&gt;name[<span class="number">0</span>], <span class="string">".."</span>);</span><br><span class="line">        temp-&gt;clust = Clust_now; <span class="comment">// ..文件夹用于存放上一个文件夹的信息</span></span><br><span class="line">        Str_Printf_32Bytes(p + <span class="number">32</span>, temp);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">free</span>(F);</span><br><span class="line">        <span class="built_in">free</span>(temp);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"create"</span>))&#123;</span><br><span class="line">        <span class="comment">//类似于新建文件夹，但是不用新建 .和.. </span></span><br><span class="line">        fi *t = Filelist_Search_File(b, FALSE);</span><br><span class="line">        <span class="keyword">if</span>(t != <span class="literal">NULL</span>)&#123;<span class="comment">//如果这个文件夹已经存在，就返回错误</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Directory already exists!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> temp[<span class="number">20</span>];<span class="comment">//创建一个临时字符串 </span></span><br><span class="line">        <span class="built_in">strcpy</span>(temp, b);</span><br><span class="line">        Str_Cut_Name_Into_Two(temp, a, b);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strlen</span>(a) &gt;= <span class="number">8</span> || <span class="built_in">strlen</span>(b) &gt;=<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Name too long!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> Clust_temp = Clust_now;</span><br><span class="line">        <span class="keyword">int</span> k = Dir_Find_Empty(Clust_temp);</span><br><span class="line">        <span class="keyword">while</span>(k == <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(Clust_Judge_Status(clust[Clust_temp].status) == <span class="number">0</span>)</span><br><span class="line">                Clust_temp = clust[Clust_temp].status;<span class="comment">//如果这个链表的其他簇还有空位 </span></span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> Clust_new = <span class="number">2</span>;<span class="comment">//这个链表中已经不存在空位了，要找一个空簇，从第二个簇开始找 </span></span><br><span class="line">                <span class="keyword">while</span>(clust[Clust_new].status != <span class="number">0</span>) Clust_new++;</span><br><span class="line">                clust[Clust_temp].status = Clust_new;</span><br><span class="line">                clust[Clust_new].status = <span class="number">0xFFFF</span>;</span><br><span class="line">                Clust_temp = Clust_new;</span><br><span class="line">            &#125;</span><br><span class="line">            k = Dir_Find_Empty(Clust_temp);<span class="comment">//重新寻找空位 </span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fi *F = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));<span class="comment">//填充基本信息 </span></span><br><span class="line">        Make_a_New_File(F, FALSE);</span><br><span class="line">        clust[Clust_temp].status = <span class="number">0xFFFF</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(F-&gt;name[<span class="number">0</span>], a);<span class="comment">//修改文件名称 </span></span><br><span class="line">        <span class="built_in">strcpy</span>(F-&gt;name[<span class="number">1</span>], b);<span class="comment">//修改文件后缀 </span></span><br><span class="line">        Data_Add_A_File(F, Clust_temp, k);<span class="comment">//把文件写入簇</span></span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"rmdir"</span>))&#123;</span><br><span class="line"></span><br><span class="line">        fi *t = Filelist_Search_File(b, TRUE);</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"no such a directory!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Clust_Clear_Dir(t-&gt;clust);</span><br><span class="line">        <span class="keyword">char</span> temp[<span class="number">20</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(temp, b);</span><br><span class="line">        Str_Cut_Name_Into_Two(temp, a, b);<span class="comment">//把文件名分割一下 </span></span><br><span class="line">        <span class="keyword">char</span> *st = clust[Clust_now].byte;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>; i++)&#123;<span class="comment">//寻找到簇中的那个文件，并且打上0xe5标记 </span></span><br><span class="line">            fi *p = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));</span><br><span class="line"></span><br><span class="line">            Str_Read_32Bytes(st + i * <span class="number">32</span>, p);</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(p-&gt;name[<span class="number">0</span>], a) == <span class="number">0</span> &amp;&amp; <span class="built_in">strcmp</span>(p-&gt;name[<span class="number">1</span>], b) == <span class="number">0</span> &amp;&amp; p-&gt;dir == TRUE)&#123;</span><br><span class="line">                *(st + i * <span class="number">32</span>) = <span class="number">0xE5</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            直接找到那个文件，首先递归删除该文件夹下的所有内容</span></span><br><span class="line"><span class="comment">            然后再把本身 标记为删除 </span></span><br><span class="line"><span class="comment">        */</span> </span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"rm"</span>))&#123;</span><br><span class="line"></span><br><span class="line">        fi *t = Filelist_Search_File(b, FALSE);</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"no such a file!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Clust_Clear_File(t-&gt;clust);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> *st = clust[Clust_now].byte;</span><br><span class="line">        <span class="keyword">char</span> temp[<span class="number">20</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(temp, b);</span><br><span class="line">        Str_Cut_Name_Into_Two(temp, a, b);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>; i++)&#123;</span><br><span class="line">            fi *p = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));</span><br><span class="line">            Str_Read_32Bytes(st + i * <span class="number">32</span>, p);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(p-&gt;name[<span class="number">0</span>], a) == <span class="number">0</span> &amp;&amp; <span class="built_in">strcmp</span>(p-&gt;name[<span class="number">1</span>], b) == <span class="number">0</span> &amp;&amp; p-&gt;dir == FALSE)&#123;</span><br><span class="line">                *(st + i * <span class="number">32</span>) = <span class="number">0xE5</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;       </span><br><span class="line"></span><br><span class="line">        <span class="comment">//类似于删除文件夹，但不用递归删除 </span></span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"read"</span>))&#123;</span><br><span class="line">        fi *t = Filelist_Search_File(b, FALSE);</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"no such a file!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> nxtClust = t-&gt;clust;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\nThis is what %s contains:"</span>, b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n----------------------------\n"</span>);</span><br><span class="line">        <span class="keyword">while</span>(flag == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(clust[nxtClust].byte[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%c"</span>,clust[nxtClust].byte[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(Clust_Judge_Status(clust[nxtClust].status) == <span class="number">1</span>)</span><br><span class="line">                flag = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                nxtClust = clust[nxtClust].status;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n----------------------------\n\n"</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            根据簇号直接搜索到对应的文件并且读入 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"write"</span>))&#123;</span><br><span class="line"></span><br><span class="line">        fi *t = Filelist_Search_File(b, FALSE);</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"no such a file!\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> TRUE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> nxtClust = t-&gt;clust;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="keyword">while</span>(flag == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR; i++)&#123;</span><br><span class="line">                c = getchar();</span><br><span class="line">                <span class="keyword">if</span>(c == <span class="number">-1</span>)&#123;</span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">                    clust[nxtClust].byte[i] = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span></span><br><span class="line">                    clust[nxtClust].byte[i] = c;</span><br><span class="line">            &#125;</span><br><span class="line">            clust[nxtClust].status = <span class="number">0xFFFF</span>;</span><br><span class="line">            <span class="keyword">if</span>(flag == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(Clust_Judge_Status(clust[nxtClust].status) == <span class="number">0</span>)</span><br><span class="line">                nxtClust = clust[nxtClust].status;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> tempClust = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">while</span>(Clust_Judge_Status(clust[tempClust].status) != <span class="number">2</span>) </span><br><span class="line">                    tempClust++;</span><br><span class="line">                clust[nxtClust].status = tempClust;</span><br><span class="line">                nxtClust = tempClust;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            边写文件边开新的簇 </span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"format"</span>))&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Are you sure to FORMAT this disk? (y/n): "</span>);</span><br><span class="line">        gets(a);</span><br><span class="line">        <span class="keyword">if</span>(ISCMD(<span class="string">"y"</span>) || ISCMD(<span class="string">"Y"</span>))&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Once again. You'll lose your data, continue? (y/n): "</span>);</span><br><span class="line">            gets(a);</span><br><span class="line">            <span class="keyword">if</span>(ISCMD(<span class="string">"y"</span>) || ISCMD(<span class="string">"Y"</span>))&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"formating...  "</span>);</span><br><span class="line">                Data_ReadOrWrite(<span class="number">2</span>);</span><br><span class="line">                Data_Create_New();</span><br><span class="line">                Data_ReadOrWrite(<span class="number">3</span>);</span><br><span class="line">                Data_ReadOrWrite(<span class="number">1</span>);</span><br><span class="line">                Data_Read();</span><br><span class="line">                Data_ReadOrWrite(<span class="number">3</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"done.\n\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ISCMD(<span class="string">"save"</span>))&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Are you sure to quit with saving? (y/n): "</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, a);</span><br><span class="line">        <span class="keyword">if</span>(ISCMD(<span class="string">"y"</span>) || ISCMD(<span class="string">"Y"</span>))&#123;</span><br><span class="line">            Data_Save();</span><br><span class="line">            <span class="keyword">return</span> FALSE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"unknown command \"%s\"\n"</span>,str);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> TRUE;<span class="comment">//继续循环 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Data_ReadOrWrite</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> t)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">switch</span>(t)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//只读 </span></span><br><span class="line">            fp = fopen(<span class="string">"fat16_data.bin"</span>, <span class="string">"rb"</span>);</span><br><span class="line">            <span class="keyword">return</span> fp != <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//可写 </span></span><br><span class="line">            fp = fopen(<span class="string">"fat16_data.bin"</span>, <span class="string">"wb"</span>);</span><br><span class="line">            <span class="keyword">return</span> fp != <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            fclose(fp);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Initialize</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">if</span>(Data_ReadOrWrite(<span class="number">1</span>) == FALSE)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Disk data doesn't exist. \nCreating a new one...\n"</span>);</span><br><span class="line">        Data_Create_New();</span><br><span class="line">    &#125;</span><br><span class="line">    Data_ReadOrWrite(<span class="number">3</span>);<span class="comment">//关闭文件 </span></span><br><span class="line">    Data_ReadOrWrite(<span class="number">1</span>);<span class="comment">//只读模式 </span></span><br><span class="line"></span><br><span class="line">    Data_Read();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Data loaded successfully.\n\n"</span>);</span><br><span class="line">    Clust_now = <span class="number">1</span>;</span><br><span class="line">    Data_ReadOrWrite(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Read</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fseek(fp, BYTES_PER_SECTOR, SEEK_CUR);<span class="comment">//跳过DBR区域 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">-1</span> + SECTORS_PER_FAT * BYTES_PER_SECTOR &gt;&gt; <span class="number">1</span>; i++)<span class="comment">//注意，这里是从0开始读 </span></span><br><span class="line">        clust[i].status = (<span class="keyword">int</span>) File_Scanf_Number(<span class="number">2</span>);<span class="comment">//读取FAT1 </span></span><br><span class="line">    fseek(fp, SECTORS_PER_FAT * BYTES_PER_SECTOR, SEEK_CUR);<span class="comment">//跳过FAT2</span></span><br><span class="line">    fread(clust[<span class="number">1</span>].byte, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), BYTES_PER_SECTOR * SECTORS_ROOT, fp);<span class="comment">//读取根目录 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= CLUST_MAX_COUNT; i++)</span><br><span class="line">        fread(clust[i].byte, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), BYTES_PER_SECTOR * SECTORS_PER_CLUST, fp);<span class="comment">//读取数据区 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Create_New</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    Data_ReadOrWrite(<span class="number">2</span>);</span><br><span class="line">    Data_DBR_Print();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= <span class="number">1</span>; k++)&#123;<span class="comment">//填充FAT区域 </span></span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0xFF</span>);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0xFF</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SECTORS_PER_FAT * BYTES_PER_SECTOR - <span class="number">2</span>; i++)</span><br><span class="line">            <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fi *p = (fi*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));</span><br><span class="line">    Make_a_New_File(p, TRUE);</span><br><span class="line">    <span class="built_in">strcpy</span>(p-&gt;name[<span class="number">0</span>], <span class="string">"."</span>);</span><br><span class="line">    File_Printf_32Bytes(p);</span><br><span class="line">    <span class="built_in">strcpy</span>(p-&gt;name[<span class="number">0</span>], <span class="string">".."</span>);</span><br><span class="line">    File_Printf_32Bytes(p);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; (SECTORS_PER_CLUST * CLUST_MAX_COUNT) * BYTES_PER_SECTOR; i++)</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0</span>);<span class="comment">//把空扇区刷为0</span></span><br><span class="line">    Data_ReadOrWrite(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Save</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Data_ReadOrWrite(<span class="number">2</span>);</span><br><span class="line">    Data_DBR_Print();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">1</span>; j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">-1</span> + SECTORS_PER_FAT * BYTES_PER_SECTOR &gt;&gt; <span class="number">1</span>; i++)</span><br><span class="line">            File_Printf_Number(clust[i].status, <span class="number">2</span>);<span class="comment">//打印FAT表，打印两份</span></span><br><span class="line">    fwrite(clust[<span class="number">1</span>].byte, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), BYTES_PER_SECTOR * SECTORS_ROOT, fp);<span class="comment">//保存根目录 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= CLUST_MAX_COUNT; i++)</span><br><span class="line">        fwrite(clust[i].byte, <span class="keyword">sizeof</span>(<span class="keyword">char</span>), BYTES_PER_SECTOR * SECTORS_PER_CLUST, fp);<span class="comment">//保存数据区</span></span><br><span class="line">    Data_ReadOrWrite(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">fi *<span class="title">Filelist_Search_File</span><span class="params">(<span class="keyword">char</span> *name, <span class="keyword">bool</span> IsDir)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">20</span>], b[<span class="number">20</span>];</span><br><span class="line">    Str_Cut_Name_Into_Two(name, a, b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(fi *p = HEAD; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(a, p-&gt;name[<span class="number">0</span>]) == <span class="number">0</span> &amp;&amp; <span class="built_in">strcmp</span>(b, p-&gt;name[<span class="number">1</span>]) == <span class="number">0</span> &amp;&amp; p-&gt;dir == IsDir)</span><br><span class="line">            <span class="keyword">return</span> p;<span class="comment">//找到了     </span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;<span class="comment">//没找到 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">    <span class="keyword">for</span>(fi *p = HEAD; p != <span class="literal">NULL</span>; p = p-&gt;next)&#123;</span><br><span class="line">        Date_Print(p-&gt;date);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"  "</span>);</span><br><span class="line">        Time_Print(p-&gt;time);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"  "</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\t\t"</span>, p-&gt;dir == TRUE?<span class="string">"&lt;DIR&gt; "</span>:<span class="string">"&lt;FILE&gt;"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s"</span>,p-&gt;name[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">if</span>(!p-&gt;dir &amp;&amp; p-&gt;name[<span class="number">1</span>][<span class="number">0</span>] != <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">".%s"</span>, p-&gt;name[<span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Update</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(id &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    fi t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>; i++)</span><br><span class="line">        <span class="keyword">if</span>(Str_Read_32Bytes(clust[id].byte + <span class="number">32</span> * i, &amp;t))&#123;<span class="comment">//如果读取成功，就申请一段新内存来存文件 </span></span><br><span class="line">            fi *p = (fi *) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(fi));</span><br><span class="line">            *p = t;</span><br><span class="line">            p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">            Filelist_Add_File(p);</span><br><span class="line">        &#125;    </span><br><span class="line">    <span class="keyword">if</span>(!Clust_Judge_Status(clust[id].status))<span class="comment">//如果这个簇后面还有文件 就继续读取 </span></span><br><span class="line">        Filelist_Update(clust[id].status);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FileCnt = <span class="number">0</span>;</span><br><span class="line">    fi *p;</span><br><span class="line">    <span class="keyword">for</span>(fi *pre = HEAD; pre != <span class="literal">NULL</span>; pre= p)&#123;</span><br><span class="line">        p = pre-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(pre);</span><br><span class="line">    &#125;</span><br><span class="line">    HEAD = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Add_File</span><span class="params">(fi *p)</span></span>&#123;</span><br><span class="line">    p-&gt;next = HEAD;<span class="comment">//直接在头部添加上新结点 </span></span><br><span class="line">    HEAD = p;</span><br><span class="line">    FileCnt++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Clust_Judge_Status</span><span class="params">(<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(t &gt;= <span class="number">0x2</span> &amp;&amp; t &lt;= <span class="number">0xFFEF</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//还有连接的簇 </span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">0xFFFF</span>) <span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//文件结束</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">2</span>;<span class="comment">//空簇 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Str_Read_32Bytes</span><span class="params">(<span class="keyword">char</span> *str, fi *a)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    Str_Scanf_String(str, <span class="number">8</span>, a-&gt;name[<span class="number">0</span>]);</span><br><span class="line">    Str_Scanf_String(str + <span class="number">8</span>, <span class="number">3</span>, a-&gt;name[<span class="number">1</span>]);</span><br><span class="line"><span class="comment">//这下面吧0xE5改为了-27 （ascii码相同） </span></span><br><span class="line">    <span class="keyword">if</span>(a-&gt;name[<span class="number">0</span>][<span class="number">0</span>] == <span class="number">-27</span> || a-&gt;name[<span class="number">0</span>][<span class="number">0</span>] == <span class="number">0</span>)&#123;<span class="comment">//如果该文件已经被删除或者不存在 </span></span><br><span class="line">        fseek(fp, <span class="number">21</span>, SEEK_CUR);<span class="comment">//直接跳过剩下32 - 11 = 21个字节</span></span><br><span class="line">        <span class="keyword">return</span> FALSE;</span><br><span class="line">    &#125;</span><br><span class="line">    str = str + <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">if</span>(*str++ == <span class="number">0x10</span>) <span class="comment">//该文件是个目录 </span></span><br><span class="line">        a-&gt;dir = TRUE; </span><br><span class="line">    <span class="keyword">else</span> a-&gt;dir = FALSE;</span><br><span class="line"></span><br><span class="line">    str += <span class="number">10</span>;<span class="comment">//跳过10个无意义字节 </span></span><br><span class="line"></span><br><span class="line">    a-&gt;time = Str_Scanf_Number(str, <span class="number">2</span>);<span class="comment">//读取时间</span></span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    a-&gt;date = Str_Scanf_Number(str, <span class="number">2</span>);<span class="comment">//读取日期</span></span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    a-&gt;clust = Str_Scanf_Number(str, <span class="number">2</span>);<span class="comment">//读取首簇号</span></span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    a-&gt;len = Str_Scanf_Number(str, <span class="number">4</span>);<span class="comment">//读取文件大小 </span></span><br><span class="line">    str += <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_32Bytes</span><span class="params">(fi *t)</span></span>&#123;</span><br><span class="line">    File_Printf_String(t-&gt;name[<span class="number">0</span>], <span class="number">8</span>);</span><br><span class="line">    File_Printf_String(t-&gt;name[<span class="number">1</span>], <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span>(t-&gt;dir == TRUE)</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0x10</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0x20</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0xFF</span>);</span><br><span class="line">    File_Printf_Number(t-&gt;time, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(t-&gt;date, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(t-&gt;clust, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(t-&gt;len, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Printf_32Bytes</span><span class="params">(<span class="keyword">char</span> *str, fi *t)</span></span>&#123;</span><br><span class="line">    <span class="built_in">strncpy</span>(str, t-&gt;name[<span class="number">0</span>], <span class="number">8</span>);</span><br><span class="line">    str += <span class="number">8</span>;</span><br><span class="line">    <span class="built_in">strncpy</span>(str, t-&gt;name[<span class="number">1</span>], <span class="number">3</span>);</span><br><span class="line">    str += <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(t-&gt;dir == TRUE)</span><br><span class="line">        *str++ = <span class="number">0x10</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        *str++ = <span class="number">0x20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">        *str++ = <span class="number">0xFF</span>;</span><br><span class="line"></span><br><span class="line">    Str_Printf_Number(str, t-&gt;time, <span class="number">2</span>);</span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    Str_Printf_Number(str, t-&gt;date, <span class="number">2</span>);</span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    Str_Printf_Number(str, t-&gt;clust, <span class="number">2</span>);</span><br><span class="line">    str += <span class="number">2</span>;</span><br><span class="line">    Str_Printf_Number(str, t-&gt;len, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Cut_Name_Into_Two</span><span class="params">(<span class="keyword">char</span> *name, <span class="keyword">char</span> *a, <span class="keyword">char</span> *b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">30</span>];</span><br><span class="line">    <span class="built_in">strcpy</span>(temp, name);</span><br><span class="line">    <span class="keyword">char</span> *t = temp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(t, <span class="string">".."</span>) == <span class="number">0</span> || <span class="built_in">strcmp</span>(t, <span class="string">"."</span>) == <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">strcpy</span>(a, temp);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(*t != <span class="number">0</span> &amp;&amp; *t != <span class="string">'.'</span>) t++;</span><br><span class="line">        <span class="keyword">if</span>(*t == <span class="number">0</span>) *(t + <span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">        *t = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(a, temp);</span><br><span class="line">        <span class="built_in">strcpy</span>(b, t + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Filelist_Bubble_Sort</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; FileCnt; i++)</span><br><span class="line">        <span class="keyword">for</span>(fi *p = HEAD; p-&gt;next != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(p-&gt;name[<span class="number">0</span>], p-&gt;next-&gt;name[<span class="number">0</span>]) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                fi _a, _b, *pnx;<span class="comment">//交换函数</span></span><br><span class="line">                pnx = p-&gt;next;</span><br><span class="line">                _a = *p;</span><br><span class="line">                _b = *pnx;</span><br><span class="line"></span><br><span class="line">                *p = _b;</span><br><span class="line">                *pnx = _a;</span><br><span class="line">                p-&gt;next = _a.next;</span><br><span class="line">                pnx-&gt;next = _b.next;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_DBR_Print</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="built_in">fprintf</span>(fp, <span class="string">"%c%c%c"</span>,<span class="number">0xEB</span> ,<span class="number">0x3C</span> ,<span class="number">0x90</span> );</span><br><span class="line">    <span class="built_in">fprintf</span>(fp, <span class="string">"ByMrh929"</span>);</span><br><span class="line">    File_Printf_Number(BYTES_PER_SECTOR, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(SECTORS_PER_CLUST, <span class="number">1</span>);</span><br><span class="line">    File_Printf_Number(RESERVED_SECTORS, <span class="number">2</span>);<span class="comment">//保留扇区数 </span></span><br><span class="line">    File_Printf_Number(<span class="number">2</span>, <span class="number">1</span>);<span class="comment">//FAT数量</span></span><br><span class="line">    File_Printf_Number(<span class="number">512</span>, <span class="number">2</span>);<span class="comment">//根目录项数 </span></span><br><span class="line">    File_Printf_Number(SECTORS_PER_FAT, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(<span class="number">63</span>, <span class="number">2</span>);</span><br><span class="line">    File_Printf_Number(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp, <span class="string">"FAT16   "</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">475</span>; i++)</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, <span class="number">0x99</span>);</span><br><span class="line">    File_Printf_Number(<span class="number">43605</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Data_Add_A_File</span><span class="params">(fi *F, <span class="keyword">int</span> id, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *p = clust[id].byte;</span><br><span class="line">    p += k * <span class="number">32</span>;<span class="comment">//将指针移动到需要修改的那个文件信息之前 </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> newclust = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span>(clust[newclust].status != <span class="number">0</span>) newclust++;<span class="comment">//寻找一个簇，用来存放文件的信息 </span></span><br><span class="line">    clust[newclust].status = <span class="number">0xFFFF</span>;</span><br><span class="line">    <span class="built_in">memset</span>(clust[newclust].byte, <span class="number">0</span>, <span class="keyword">sizeof</span>(clust[newclust].byte));</span><br><span class="line">    F-&gt;clust = newclust;</span><br><span class="line"></span><br><span class="line">    Str_Printf_32Bytes(p, F);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Printf_Number</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">long</span> <span class="keyword">long</span> sum, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        m = sum % <span class="number">256</span>;</span><br><span class="line">        *str++ = m;<span class="comment">//输出一位数并且指针后移 </span></span><br><span class="line">        sum /= <span class="number">256</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">Str_Scanf_Number</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n ; i++)&#123;</span><br><span class="line">        t = *str++; <span class="comment">//读取一位并且指针后移 </span></span><br><span class="line">        sum += t * (<span class="number">1</span> &lt;&lt; (i * <span class="number">8</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_Number</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> sum, <span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        m = sum % <span class="number">256</span>;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, m);</span><br><span class="line">        sum /= <span class="number">256</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">File_Scanf_Number</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n ; i++)&#123; </span><br><span class="line">        <span class="built_in">fscanf</span>(fp, <span class="string">"%c"</span>, &amp;t);</span><br><span class="line">        sum += t * (<span class="number">1</span> &lt;&lt; (i * <span class="number">8</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Str_Scanf_String</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> t, <span class="keyword">char</span> *dest)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; t)&#123;</span><br><span class="line">        <span class="keyword">if</span>(*(str + i) != <span class="string">' '</span> &amp;&amp; *(str + i) != <span class="number">0</span>)&#123;</span><br><span class="line">            *(dest + i) = *(str + i);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    *(dest + i) = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">File_Printf_String</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">"%c"</span>, *(str + i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Time_Print</span><span class="params">(<span class="keyword">int</span> t)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">int</span> h, m, s;</span><br><span class="line">    s = (t &amp; <span class="number">0x1F</span>) * <span class="number">2</span>;<span class="comment">//取后五位 </span></span><br><span class="line">    t &gt;&gt;= <span class="number">5</span>;</span><br><span class="line">    m = t &amp; <span class="number">0x3F</span>;</span><br><span class="line">    t &gt;&gt;= <span class="number">6</span>;</span><br><span class="line">    h = t &amp; <span class="number">0x1F</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d"</span>, h, m, s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Date_Print</span><span class="params">(<span class="keyword">int</span> t)</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">int</span> y, m, d;</span><br><span class="line">    d = t &amp; <span class="number">0x1F</span>;</span><br><span class="line">    t &gt;&gt;= <span class="number">5</span>;</span><br><span class="line">    m = t &amp; <span class="number">0xF</span>;</span><br><span class="line">    t &gt;&gt;= <span class="number">4</span>;</span><br><span class="line">    y = (t &amp; <span class="number">0xFF</span>) + <span class="number">1980</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%04d/%02d/%02d"</span>, y, m, d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Time_Get</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">time_t</span> t;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> *<span class="title">lt</span>;</span></span><br><span class="line">    time (&amp;t);<span class="comment">//获取Unix时间戳。</span></span><br><span class="line">    lt = localtime (&amp;t);<span class="comment">//转为时间结构。</span></span><br><span class="line">    <span class="keyword">return</span> (lt-&gt;tm_hour * <span class="number">2048</span>) + (lt-&gt;tm_min * <span class="number">32</span>) + (lt-&gt;tm_sec / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Date_Get</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="keyword">time_t</span> t;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> *<span class="title">lt</span>;</span></span><br><span class="line">    time (&amp;t);<span class="comment">//获取Unix时间戳。</span></span><br><span class="line">    lt = localtime (&amp;t);<span class="comment">//转为时间结构。</span></span><br><span class="line">    lt-&gt;tm_year += <span class="number">1900</span>;</span><br><span class="line">    lt-&gt;tm_mon ++;<span class="comment">//0代表1月 </span></span><br><span class="line">    <span class="keyword">return</span> (lt-&gt;tm_year - <span class="number">1980</span>) * <span class="number">512</span> + (lt-&gt;tm_mon * <span class="number">32</span>) + (lt-&gt;tm_mday);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dir_Change</span><span class="params">(<span class="keyword">char</span> *p, <span class="keyword">bool</span> NEW)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(NEW == FALSE)</span><br><span class="line">        dir_now--;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">strcpy</span>(dir[++dir_now], p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dir_Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\\"</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= dir_now; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\\"</span>,dir[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Dir_Find_Empty</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>; i++)</span><br><span class="line">        <span class="keyword">if</span>(clust[id].byte[i * <span class="number">32</span>] == <span class="number">-27</span> || clust[id].byte[i * <span class="number">32</span>] == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//没找到一个空位 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Make_a_New_File</span><span class="params">(fi *p, <span class="keyword">bool</span> IsDir)</span></span>&#123;</span><br><span class="line">    p-&gt;clust = <span class="number">1</span>;</span><br><span class="line">    p-&gt;len = <span class="number">0</span>;</span><br><span class="line">    p-&gt;dir = IsDir;</span><br><span class="line">    p-&gt;time = Time_Get();</span><br><span class="line">    p-&gt;date = Date_Get();</span><br><span class="line">    p-&gt;name[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Clust_Clear_File</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Clust_Judge_Status(clust[id].status) == <span class="number">0</span>)<span class="comment">//还有连接的簇 </span></span><br><span class="line">        Clust_Clear_File(clust[id].status);</span><br><span class="line">    clust[id].status = <span class="number">0</span>;<span class="comment">//标记为未使用 </span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Clust_Clear_Dir</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="comment">//先搜索这个文件夹下有哪些子文件和目录，把它们删除，然后再删除自身 </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(id &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    fi t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; SECTORS_PER_CLUST * BYTES_PER_SECTOR / <span class="number">32</span>; i++)</span><br><span class="line">        <span class="keyword">if</span>(Str_Read_32Bytes(clust[id].byte + <span class="number">32</span> * i, &amp;t))&#123;<span class="comment">//如果读取成功，就申请一段新内存来存文件 </span></span><br><span class="line">            <span class="keyword">if</span>(t.dir == TRUE)</span><br><span class="line">                Clust_Clear_Dir(t.clust);<span class="comment">//递归删除子目录</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                Clust_Clear_File(t.clust);<span class="comment">//递归删除子文件</span></span><br><span class="line"></span><br><span class="line">            *(clust[id].byte + <span class="number">32</span> * i) = <span class="number">0xE5</span>;<span class="comment">//标记为删除 </span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(Clust_Judge_Status(clust[id].status) == <span class="number">0</span>)<span class="comment">//如果这个簇后面还有文件 就继续读取 </span></span><br><span class="line">        Clust_Clear_Dir(clust[id].status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Manu_Print</span><span class="params">()</span></span>&#123;<span class="comment">//done</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"This system supports the following commands:\n\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"ls/dir\t\t\t\t\tShow the files and folders contained.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"cd [DIR]\t\t\t\tEnter an appinted folder.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"mkdir [DIR]\t\t\t\tCreate a folder.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"create [NAME]\t\t\t\tCreate a file.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"rmdir [DIR]\t\t\t\tDelete a folder.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"rm [NAME]\t\t\t\tDelete a file.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"read [NAME]\t\t\t\tRead a file.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"write [NAME]\t\t\t\tWrite a file.\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"format\t\t\t\t\tFormat this disk.(be careful)\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"save\t\t\t\t\tSave this disk and quit.(without which you'll lose your data)\n\n\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2019/02/04/fat16-e6-96-87-e4-bb-b6-e7-b3-bb-e7-bb-9f/" data-id="cjv80beye004aa0etzwdk68zi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-8e-92-e5-ba-8f-e7-ae-97-e6-b3-95-e7-9a-84-e4-b8-80-e7-82-b9-e5-b0-8f-e5-bf-83-e5-be-97" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/09/e6-8e-92-e5-ba-8f-e7-ae-97-e6-b3-95-e7-9a-84-e4-b8-80-e7-82-b9-e5-b0-8f-e5-bf-83-e5-be-97/" class="article-date">
  <time datetime="2019-01-09T07:01:14.000Z" itemprop="datePublished">2019-01-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/c-c/">c/c++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/09/e6-8e-92-e5-ba-8f-e7-ae-97-e6-b3-95-e7-9a-84-e4-b8-80-e7-82-b9-e5-b0-8f-e5-bf-83-e5-be-97/">排序算法的一点小心得</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>手写了两种排序算法，但是写快排的时候，数据一大就开始死循环 原来是我判断循环跳出条件那个地方出了一点问题，cmp函数里面我写的时候当a&lt;b时才返回真，而当a==b时，程序会认为两个元素需要交换，从而无限次地交换，死循环</p>
</blockquote>
<p>一句话总结：快排一定要 跳过两个元素相等的情况</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">100000</span>;</span><br><span class="line"><span class="keyword">int</span> a[MAX];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &lt; b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_array</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        a[i] = rand() % <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n - i; j++)</span><br><span class="line">            <span class="keyword">if</span>(!cmp(a[j], a[j + <span class="number">1</span>])) swap(a[j], a[j + <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s &gt;= e ) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> i = s, j = e;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    下方while中，如果两个元素相等，必须跳过，因为一旦不跳过</span></span><br><span class="line"><span class="comment">    程序将陷入死循环 </span></span><br><span class="line"><span class="comment">    即加上 a[i]==a[j]</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; cmp(a[i], a[j]) || a[i] == a[j]) j--;</span><br><span class="line">        swap(a[i], a[j]);</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; cmp(a[i], a[j]) || a[i] == a[j]) i++;</span><br><span class="line">        swap(a[i], a[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    quick_sort(s, i<span class="number">-1</span>);</span><br><span class="line">    quick_sort(i+<span class="number">1</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">int</span> n,CHOICE;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    set_array(n);</span><br><span class="line">    print(n);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;CHOICE);</span><br><span class="line">    <span class="keyword">switch</span>(CHOICE)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:&#123;</span><br><span class="line">            bubble_sort(n);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:&#123;</span><br><span class="line">            quick_sort(<span class="number">1</span>, n);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    print(n);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​    </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2019/01/09/e6-8e-92-e5-ba-8f-e7-ae-97-e6-b3-95-e7-9a-84-e4-b8-80-e7-82-b9-e5-b0-8f-e5-bf-83-e5-be-97/" data-id="cjv80bewx001qa0etpbkq0u8b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-bd-91-e5-ae-89-e8-af-be-e7-ad-94-e8-be-a9-e6-af-94-e7-89-b9-e5-b8-81-e4-b8-8e-e5-8c-ba-e5-9d-97-e9-93-be" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/03/e7-bd-91-e5-ae-89-e8-af-be-e7-ad-94-e8-be-a9-e6-af-94-e7-89-b9-e5-b8-81-e4-b8-8e-e5-8c-ba-e5-9d-97-e9-93-be/" class="article-date">
  <time datetime="2019-01-03T09:35:21.000Z" itemprop="datePublished">2019-01-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/03/e7-bd-91-e5-ae-89-e8-af-be-e7-ad-94-e8-be-a9-e6-af-94-e7-89-b9-e5-b8-81-e4-b8-8e-e5-8c-ba-e5-9d-97-e9-93-be/">网安课答辩-比特币与区块链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>\

	<div class="row">
    <embed src="/uploads/bitcoinblockchain.pdf" width="100%" height="550" type="application/pdf">
	</div>


</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2019/01/03/e7-bd-91-e5-ae-89-e8-af-be-e7-ad-94-e8-be-a9-e6-af-94-e7-89-b9-e5-b8-81-e4-b8-8e-e5-8c-ba-e5-9d-97-e9-93-be/" data-id="cjv80beww001oa0etqlgiw695" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-ba-8c-ef-bc-89" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/31/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-ba-8c-ef-bc-89/" class="article-date">
  <time datetime="2018-12-31T06:13:12.000Z" itemprop="datePublished">2018-12-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notes/">notes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/31/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-ba-8c-ef-bc-89/">记第一次电脑组装（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="组装系统"><a href="#组装系统" class="headerlink" title="组装系统"></a>组装系统</h3><blockquote>
<p>这一步通常特别简单，但是我整整弄了一天</p>
</blockquote>
<p>第一步是在其他电脑上下载老毛桃装机软件，制作U盘镜像 第二步将U盘插入电脑，设置U盘引导启动 便会进入PE维护系统 首先新硬盘是没有分区的，我们打开disk genious</p>
<p> <a href><img src="/images/IMG_20181229_184307.jpg" alt></a> </p>
<p>选择自己的硬盘 点击快速分区，填入相关设置，一般固态硬盘分一个区就好了，机械硬盘可以多分几个区，方便分类存放文件 第三步安装Win10，老毛桃自带win10镜像下载入口，直接点击下载即可，安装至固态硬盘。</p>
<p> <a href><img src="/images/IMG_20181229_185242.jpg" alt></a> </p>
<p>等待五分钟之后，系统安装成功，准备重启！ （这里我卡了几个小时，系统安装成功但是重启之后看不到引导，让我一脸懵逼）</p>
<p> <a href><img src="/images/QQ图片20181231140709.png" alt></a> </p>
<p>最终找到原因：华硕主板需要开启CSM</p>
<p> <a href><img src="/images/IMG_20181231_004953.jpg" alt></a> </p>
<p>开启之后，硬盘引导一切正常。</p>
<p> <a href><img src="/images/IMG_20181231_005032.jpg" alt></a></p>
<p> <a href><img src="/images/IMG_20181231_005452.jpg" alt></a> </p>
<p><a href><img src="/images/IMG_20181231_005901.jpg" alt></a> </p>
<p>卸载掉所有360全家桶和垃圾软件 并激活系统 （找八国联军买激活码hhhhh，淘宝12块钱还支持联网验证）</p>
<p> <a href><img src="/images/IMG_20181231_011129.jpg" alt></a> </p>
<p><a href><img src="/images/IMG_20181231_011253.jpg" alt></a> </p>
<p>到这里装机就告一段落了 这是我的配置：</p>
<p> <a href><img src="/images/IMG_20181231_015713.jpg" alt></a></p>
<blockquote>
<p>SSD，真香！ Win10，真香！</p>
</blockquote>
<p>这次装机总共耗时两天，总归有所收获，咸鱼终于摆脱了电脑城奸商的敲诈，期待下一次的装机！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/31/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-ba-8c-ef-bc-89/" data-id="cjv80bewv001la0etlqum7djh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-b8-80-ef-bc-89" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/30/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-b8-80-ef-bc-89/" class="article-date">
  <time datetime="2018-12-29T18:02:13.000Z" itemprop="datePublished">2018-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notes/">notes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/30/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-b8-80-ef-bc-89/">记第一次电脑组装（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h3><blockquote>
<p>之前从来没有组装过电脑，而且我所用过电脑都是电脑城奸商们提供的“良品”。 这次的组装电脑我已经等待三个月了，从开学的规划预算，到双十一购买配件，到元旦回家装机。 预算：3000 左右，主要功能：用来日常上网使用，cpu性能要与i5 8400 差不多，日后需要具备升级1066显卡的潜力（升级后主要打游戏为主）。 找人给出如下配置单：</p>
</blockquote>
<p><a href><img src="/images/配置单.png" alt></a></p>
<blockquote>
<p>其中除开1065 大概就是3900的样子。不过我双十一去买U的时候U+主板降价到了1800（加上某些原因，跟卖家吵了一架然后退掉了，买了同学的二手U+华硕primeM360-K，1400元） 三星PM961听说售后不太好，正好双十一的时候intel p760 降价100，于是毫不犹豫转战intel 最终所有配件3000元拿下，是一个很理想的价格了</p>
</blockquote>
<h3 id="开始装机"><a href="#开始装机" class="headerlink" title="开始装机"></a>开始装机</h3><p>教程来源：<a href="https://zhuanlan.zhihu.com/p/52235439" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/52235439</a></p>
<blockquote>
<p>配件全家福</p>
</blockquote>
<p><a href><img src="/images/IMG_20181229_000719.jpg" alt></a></p>
<blockquote>
<p>同学的二手板子，安装CPU这一步已经省掉了 装内存</p>
</blockquote>
<p>这步很简单，拨开卡扣，大力出奇迹</p>
<p> <a href><img src="/images/IMG_20181229_002839.jpg" alt></a> </p>
<p><a href><img src="/images/IMG_20181229_003329.jpg" alt></a></p>
<blockquote>
<p>装固态</p>
</blockquote>
<p>看到中间的拉环了吗？其实这个是用来固定固态硬盘的，把拉环拉出，然后插入固态，再接上拉环（这样的设计比螺丝钉更人性化）</p>
<p> <a href><img src="/images/IMG_20181229_005213.jpg" alt></a></p>
<p> <a href="https://www.mrh1s.top/wp-content/uploads/2018/12/IMG_20181229_005602.jpg" target="_blank" rel="noopener"><img src="/images/IMG_20181229_005602.jpg" alt></a></p>
<blockquote>
<p>装cpu散热器</p>
</blockquote>
<p>这一步稍显复杂，但是并不难，先把散热器的整体元件拼接完成，然后在cpu后盖上涂上硅脂（黄豆大小即可，可以不用涂抹均匀，因为散热器按压下去的时候会自动压匀） 还有一个注意事项就是散热器的朝向，按照教程来讲是把风扇对着内存即可，我总结出来的是风扇的方向要与主板的接口（描述不太准确，也就是我们常说的机箱后面）相反，才方便风扇吸风然后把热量排出去。</p>
<blockquote>
<p>后面就真的到了玄学装机时间了，具体不多说，各种接口如图所示</p>
</blockquote>
<p><a href><img src="/images/v2-91906581ab615bfc2113c0881a0cb4fe_r.jpg" alt></a> </p>
<p>我自己的电脑需要接： 1. 电源接口（24针那个，特别难插） 2. CPU供电线 （8针） 3. USB3.0线（特别难插，插上去就基本上拔不下来） 4. HD AUDIO 5. 机箱上的指示灯相关的线（一共五根 两小三大） 6. SATA线接硬盘</p>
<blockquote>
<p>接线并不难，难的在布线上面，我一开始就把主板的线全部接好了，以至于后面放回机箱后电线杂乱，不得不全部拔掉重来。</p>
</blockquote>
<p>建议：第一次装先熟悉一次各种线的走向，然后提前把线部署好，等主板装好之后再接线。 而且电源线可以最后再接，因为装电源又是一个需要考虑空间的活，一切进行完成之后再接上机械硬盘，因为这个时候大多线的走向已经固定了，就不会因为杂乱的线而缠上硬盘。</p>
<h3 id="最终成果"><a href="#最终成果" class="headerlink" title="最终成果"></a>最终成果</h3><p>可以看到，我这个机箱内部是比较整洁的，像我这样有强迫症的人表示其实还是很乱。。。 所以布线很重要！布线很重要！布线很重要！重要的事情说三遍！ GX450那一个隔层里面是各类电线，其实电源里面给了特别多的线，真正用得上的也就那几根，其余的最好是用一个袋子缠起来。</p>
<p> <a href><img src="/images/IMG_20181229_180402.jpg" alt></a></p>
<p> <a href><img src="/images/IMG_20181229_180412.jpg" alt></a></p>
<blockquote>
<p>hhhhh 中途接线，没有图片真的不是因为我懒啊！是因为我装机装到后面心态爆炸了！实在没有太多的精力去拍照了！</p>
</blockquote>
<p>至于装系统后的琐事，请听下回分解。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/30/e8-ae-b0-e7-ac-ac-e4-b8-80-e6-ac-a1-e7-94-b5-e8-84-91-e7-bb-84-e8-a3-85-ef-bc-88-e4-b8-80-ef-bc-89/" data-id="cjv80bewu001ja0et0j14fksu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e5-95-86-e5-93-81-e7-ae-a1-e7-90-86-e7-b3-bb-e7-bb-9f" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/20/e5-95-86-e5-93-81-e7-ae-a1-e7-90-86-e7-b3-bb-e7-bb-9f/" class="article-date">
  <time datetime="2018-12-20T12:13:14.000Z" itemprop="datePublished">2018-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/20/e5-95-86-e5-93-81-e7-ae-a1-e7-90-86-e7-b3-bb-e7-bb-9f/">商品管理系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>大一上C语言期末作业 动态链表真的好烦啊 这次主要纠正了自己的一个错误思想 一个链表的链表头是一个指针，而不是一个结点 所以，每次操作一个链表的时候，要传入指针的指针 才能达到修改第一个结点的目的 GoodList *Head; //这是指向链表头的指针 Change(&amp;Head); //传入指针的指针</p>
</blockquote>
<p><a href="/uploads/实验报告git.docx">实验报告</a></p>
<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;ctype.h&gt;
#include &lt;stdbool.h&gt;

#define MAX 100//最大商品数量 
int CurrentCnt = 0;//当前商品数量 

#define MAX_ID_LEN 30
#define MAX_NAME_LEN 30
#define MAX_PRICE_LEN 30
#define MAX_DISCOUNT_LEN 30
typedef struct{//商品信息结构 
    char    good_id[MAX_ID_LEN];
    char    good_name[MAX_NAME_LEN];
    int     good_price;
    char    good_discount[MAX_DISCOUNT_LEN];
    int     good_amount;
    int     good_remain;
}GoodInfo;

typedef struct node{//商品链表结点 
    GoodInfo data;
    struct node *next;
}GoodList;

FILE *fp;//文件指针用来操作文件 
int file_read(){
    fp = fopen(&quot;goodinfo.txt&quot;, &quot;r&quot;);//读取文件 
    return fp != NULL;
}

void file_write(){
    fp= fopen(&quot;goodinfo.txt&quot;, &quot;w&quot;);//写文件 
}

void file_close(){
    fclose(fp); 
}

void pause(){
    system(&quot;pause&quot;);
    system(&quot;cls&quot;);
}

bool check_nullfile(){//检查商品文件是否存在或者是否为空
    if(file_read()) return 0;//找到文件 
    else{
        file_write(); file_close();
        file_read();
        return 1;//没有找到文件 
    }
}

//--------------------------------------------------------------------
//查找一条商品记录
//--------------------------------------------------------------------
GoodList* good_find(GoodList *L,char *p){
    while(L)
        if(strcmp(L-&gt;data.good_id, p) == 0) return L;
        else L = L-&gt;next;
    return NULL;//没找到 
}

void info_change(GoodList *L) {
    printf(&quot;请输入新的商品信息：\n&quot;);
    printf(&quot;商品ID：&quot;); scanf(&quot;%s&quot;,L-&gt;data.good_id);
    printf(&quot;商品名称：&quot;); scanf(&quot;%s&quot;,L-&gt;data.good_name);
    printf(&quot;商品价格：&quot;); scanf(&quot;%d&quot;,&amp;(L-&gt;data.good_price));
    printf(&quot;商品折扣：&quot;); scanf(&quot;%s&quot;,L-&gt;data.good_discount);
    printf(&quot;商品数量：&quot;); scanf(&quot;%d&quot;,&amp;(L-&gt;data.good_amount));
    printf(&quot;商品剩余：&quot;); scanf(&quot;%d&quot;,&amp;(L-&gt;data.good_remain));
    return;
}

void info_change_NoRepeat(GoodList *p,GoodList *L) {//p为新增的指针 ， L为链表的头指针 
    printf(&quot;请输入新的商品信息：\n&quot;);
    printf(&quot;商品ID：&quot;); scanf(&quot;%s&quot;,p-&gt;data.good_id);
    while(good_find(L,p-&gt;data.good_id) != NULL){
        printf(&quot;商品ID已存在，请重新输入：\n&quot;);
        printf(&quot;商品ID：&quot;); scanf(&quot;%s&quot;,p-&gt;data.good_id);
    }

    printf(&quot;商品名称：&quot;); scanf(&quot;%s&quot;,p-&gt;data.good_name);
    printf(&quot;商品价格：&quot;); scanf(&quot;%d&quot;,&amp;(p-&gt;data.good_price));
    printf(&quot;商品折扣：&quot;); scanf(&quot;%s&quot;,p-&gt;data.good_discount);
    printf(&quot;商品数量：&quot;); scanf(&quot;%d&quot;,&amp;(p-&gt;data.good_amount));
    printf(&quot;商品剩余：&quot;); scanf(&quot;%d&quot;,&amp;(p-&gt;data.good_remain));
    return;
}
</code></pre><p>​<br>    void Goodprint(GoodList *p){//打印单个商品链表节点的信息<br>        printf(“\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n”);<br>        printf(“ID:%s\t名称:%s\t价格:%d\t折扣:%s\t数量:%d\t剩余:%d\n”,p-&gt;data.good_id,p-&gt;data.good_name,p-&gt;data.good_price,p-&gt;data.good_discount,p-&gt;data.good_amount,p-&gt;data.good_remain);<br>        printf(“++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n”);<br>    }</p>
<pre><code>void info_init(GoodList **L){//读取商品文件goodinfo.txt的内容,并建立链表L
    *L = NULL;
    CurrentCnt=0;

    if(check_nullfile())//检查是否为空 
        printf(&quot;商品文件不存在，已新建\n&quot;);
    else{
        GoodList *p, *now;
        while (!feof(fp)){//一直循环直到把文件读完
            p = (GoodList*) malloc(sizeof(GoodList));
            if(*L == NULL){//如果p是第一个非空节点 
                *L = p;
                now = p;//暂存之前的节点 
            }else{ 
                now -&gt; next = p;
                now = p;
            }

            fscanf(fp, &quot;%s&quot;, p-&gt;data.good_id);
            fscanf(fp, &quot;%s&quot;, p-&gt;data.good_name);
            fscanf(fp, &quot;%d&quot;, &amp;(p-&gt;data.good_price));
            fscanf(fp, &quot;%s&quot;, p-&gt;data.good_discount);
            fscanf(fp, &quot;%d&quot;, &amp;(p-&gt;data.good_amount));
            fscanf(fp, &quot;%d&quot;, &amp;(p-&gt;data.good_remain));
            CurrentCnt++;
        }
        now-&gt;next = NULL;//把尾节点中的指针置0 
    }
    file_close();
}

void DelAll(GoodList **L){//删除商品文件以及商品链表中的所有信息
    char str[MAX_ID_LEN];
    printf(&quot;将会清除所有文件及链表，确定吗？（Y/N）：&quot;);
    scanf(&quot;%s&quot;,str);
    if(strcmp(str, &quot;Y&quot;) != 0 &amp;&amp; strcmp(str, &quot;y&quot;) != 0){
        printf(&quot;操作已取消\n\n&quot;);
        return; 
    }
    printf(&quot;再次询问，这将造成数据的丢失，确定吗？（Y/N）：&quot;);
    scanf(&quot;%s&quot;,str);
    if(strcmp(str, &quot;Y&quot;) != 0 &amp;&amp; strcmp(str, &quot;y&quot;) != 0){
        printf(&quot;操作已取消\n\n&quot;);
        return; 
    }
</code></pre><p>​<br>        GoodList <em>p = </em>L, *now;<br>        while(p != NULL){//free指针<br>            now = p-&gt;next;<br>            free(p);<br>            p = now;<br>        }</p>
<pre><code>    remove(&quot;goodinfo.txt&quot;);//重写文件
    printf(&quot;成功删除所有数据\n\n&quot;);
    info_init(L);
}
</code></pre><p>​<br>​<br>    //——————————————————————–<br>    //将当前商品链表中的内容存入商品文件goodinfo.txt，存盘后销毁链表L<br>    //——————————————————————–<br>    void info_flush(GoodList *<em>L){<br>        file_write();<br>        GoodList </em>p = <em>L, </em>now;<br>        while(p != NULL){//free指针<br>            fprintf(fp, “%s\t%s\t%d\t%s\t%d\t%d”,p-&gt;data.good_id,p-&gt;data.good_name,p-&gt;data.good_price,p-&gt;data.good_discount,p-&gt;data.good_amount,p-&gt;data.good_remain);<br>            now = p-&gt;next;<br>            if(now != NULL)<br>                fprintf(fp, “\n”);<br>            free(p);<br>            p = now;<br>        }</p>
<pre><code>}

//--------------------------------------------------------------------
//在屏幕上输出所有商品信息
//--------------------------------------------------------------------
void OutputAll(GoodList *L){
    while(L){
        Goodprint(L);
        L = L -&gt; next;
    }
}

void info_insert(GoodList **L) {
    GoodList *p = (GoodList*) malloc(sizeof(GoodList));
    GoodList *now = *L;

    int CHOICE;
    printf(&quot;请选择插入方法：\n&quot;);
    printf(&quot;\t1.头插法：\n&quot;);
    printf(&quot;\t2.尾插法：\n&quot;);
    printf(&quot;\t3.中间插入：\n\n&quot;);
    printf(&quot;输入您的选择：&quot;); 

    scanf(&quot;%d&quot;,&amp;CHOICE);
    switch(CHOICE){
        case 1:{//头插法 
            info_change_NoRepeat(p, *L);
            p-&gt;next = *L;
            *L = p;
            CurrentCnt++;
            break;
        }

        case 2:{//尾插法 
            info_change_NoRepeat(p, *L);
            if(*L == NULL) *L=p;
            else{
                while(now-&gt;next != NULL) now = now-&gt;next;
                now-&gt;next = p;
                p-&gt;next = NULL;//尾插法 
            }
            CurrentCnt++;
            break;
        }

        case 3:{
            char ID[MAX_ID_LEN];
            info_change_NoRepeat(p, *L);
            printf(&quot;请输入要将该信息插入到哪个ID后面：&quot;);
            scanf(&quot;%s&quot;,ID);

            GoodList *now;
            now=good_find(*L, ID);
            while(now == NULL){
                printf(&quot;没有找到该ID，请重新输入ID：&quot;);
                scanf(&quot;%s&quot;,ID);
                now=good_find(*L, ID);
            }
            p-&gt;next = now-&gt;next;
            now-&gt;next = p;

            CurrentCnt++;
            break;
        }
</code></pre><p>​<br>​<br>        }<br>        return;<br>    }</p>
<pre><code>//--------------------------------------------------------------------
//删除一条商品记录
//--------------------------------------------------------------------
void info_dele(GoodList **L) {
    char ID[MAX_ID_LEN];
    GoodList *p;
    printf(&quot;请输入要删除的商品ID：&quot;);
    scanf(&quot;%s&quot;,ID);
    p = good_find(*L, ID);
    while(p == NULL){
        printf(&quot;未找到该商品，请重新输入ID：&quot;);
        scanf(&quot;%s&quot;,ID);
        p = good_find(*L, ID);
    }

    printf(&quot;\n你确定要删除该商品吗（默认否）？(Y/N)：&quot;);
    scanf(&quot;%s&quot;,ID);//读入选项 
    if(strcmp(ID, &quot;Y&quot;) == 0||strcmp(ID, &quot;y&quot;) == 0){
        if(*L == p){
            *L = p-&gt;next;
            free(p);
        }else{
            GoodList* now = *L;//寻找p商品之前的那个结点 
            while(now-&gt;next != p) now = now-&gt;next;
            now-&gt;next = p-&gt;next;
            free(p);
        }
        CurrentCnt--;
        printf(&quot;已删除\n\n&quot;);
    }else printf(&quot;已取消\n\n&quot;);
    return;
}
</code></pre><p>​<br>    void menu_print(){<br>        printf(“商品的链表文件已建立，有%d个商品记录\n”, CurrentCnt);<br>        printf(“<strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong>\n”);<br>        printf(“1.显示所有商品的信息：\n”);<br>        printf(“2.修改某个商品的信息：\n”);<br>        printf(“3.插入某个商品的信息：\n”);<br>        printf(“4.删除某个商品的信息：\n”);<br>        printf(“5.查找某个商品的信息：\n”);<br>        printf(“6.商品存盘并退出系统：\n”);<br>        printf(“7.对商品价格进行排序：\n”);<br>        printf(“8.(慎用)删除所有内容：\n”);<br>        printf(“其他，不存盘并退出系统：\n”);<br>        printf(“<strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong>\n”);<br>        printf(“输入您的选择：”);<br>    }</p>
<pre><code>void good_swap(GoodList* a,GoodList* b){//交换两个商品的位置 
    GoodList a_ = *a, b_ = *b;
    *a = b_;
    *b = a_;
    a-&gt;next = a_.next;
    b-&gt;next = b_.next;
    return;
}

void bubble_sort(GoodList **L){
    printf(&quot;正在冒泡排序...\n&quot;);
    for(int i=1;i&lt;=CurrentCnt-1;i++){
        GoodList* now = *L;
        while(now-&gt;next != NULL){
            if(now-&gt;data.good_price &gt; now-&gt;next-&gt;data.good_price)
                good_swap(now, now-&gt;next);
            now = now-&gt;next;
        }

    }
    printf(&quot;排序完成！\n&quot;);
    OutputAll(*L);
}
</code></pre><p>​<br>    int main(){<br>        char str[MAX_ID_LEN];<br>        int CHOICE;<br>        GoodList <em>Head,</em>p;<br>        Head=NULL;</p>
<pre><code>info_init(&amp;Head);//读取文件

do{
    printf(&quot;超市商品管理系统\n&quot;);
    CHOICE=0;
    menu_print();//菜单 

    scanf(&quot;%d&quot;,&amp;CHOICE);//输入选择 
    switch(CHOICE){
        case 1:{
            OutputAll(Head);
            pause();
            break;
        }

        case 2:{
            int ok=0;
            do{
                printf(&quot;请输入需要修改的商品ID（输入-1退出）:&quot;); 
                scanf(&quot;%s&quot;,str);
                if(strcmp(str,&quot;-1&quot;) == 0) break;
                p = good_find(Head, str);
                if(p == NULL) printf(&quot;\n对不起，没有找到该商品，请重新输入:\n&quot;);
                else Goodprint(p),ok=1;
            }while(!p);

            if(ok){
                info_change(p);
                printf(&quot;\n修改成功!\n\n&quot;);
            }
            pause();
            break;
        }

        case 3:{
            info_insert(&amp;Head);
            pause();
            break;
        }

        case 4:{
            info_dele(&amp;Head);
            pause();
            break;
        }

        case 5:{
            printf(&quot;请输入需要查询的商品ID:&quot;); 
            scanf(&quot;%s&quot;,str);
            p = good_find(Head, str);
            if(p == NULL) printf(&quot;\n对不起，没有找到该商品\n\n&quot;);
            else Goodprint(p);

            pause();
            break;
        }
</code></pre><p>​<br>                case 6:{<br>                    char str[MAX_ID_LEN];<br>                    printf(“确定要保存吗？（Y/N）：”);<br>                    scanf(“%s”,str);</p>
<pre><code>                if(strcmp(str, &quot;Y&quot;) == 0||strcmp(str, &quot;y&quot;) == 0){
                    info_flush(&amp;Head);
                    printf(&quot;保存成功，即将退出系统\n&quot;);
                    CHOICE=0;//退出信号 
                }else{
                    printf(&quot;已取消\n&quot;);
                    pause();
                }
                break;
            }

            case 7:{
                bubble_sort(&amp;Head);

                pause();
                break;
            }

            case 8:{
                DelAll(&amp;Head);

                pause();
                break;
            }

            default:{
                CHOICE=0;//退出信号 
                printf(&quot;\n即将不存盘并退出系统\n\n\n\n&quot;);
            }
        }
    }while(CHOICE);

    system(&quot;pause&quot;);
    return 0;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/20/e5-95-86-e5-93-81-e7-ae-a1-e7-90-86-e7-b3-bb-e7-bb-9f/" data-id="cjv80bexz0041a0etozqr4opl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-bd-91-e7-bb-9c-e5-ae-89-e5-85-a8-e8-af-be-e7-ac-94-e8-ae-b0-of-shijie-zhou-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/13/e7-bd-91-e7-bb-9c-e5-ae-89-e5-85-a8-e8-af-be-e7-ac-94-e8-ae-b0-of-shijie-zhou-2/" class="article-date">
  <time datetime="2018-12-13T13:42:46.000Z" itemprop="datePublished">2018-12-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notes/">notes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/e7-bd-91-e7-bb-9c-e5-ae-89-e5-85-a8-e8-af-be-e7-ac-94-e8-ae-b0-of-shijie-zhou-2/">网络安全课笔记 of Shijie Zhou #2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="密码学的应用"><a href="#密码学的应用" class="headerlink" title="密码学的应用"></a>密码学的应用</h2><p><strong>安全多方计算：</strong> ​ y=f( x1 , x2 , … , xn) 在不告诉其他人自己的输入内容的情况下计算出结果的方法 ​ 目前无解，难题 ​ 但有特例：两方安全计算问题 ​ 百万富翁难题，n1，n2如何在双方不知道对方数值的情况下比较这两个数的大小关系 ​ 解决方法：1.基于RSA的方案 2.可信第三方（P2P对等网络/BlockChain） <strong>密钥交换：</strong> 基础：数学难题（安全性基于假设，没有严格的数学证明，归约的思想） DH密钥交换 ​ y=(g^x)mod n 很容易， 但反函数很困难（离散对数问题） k=g^(x+y) ​ 但容易遭受中间人攻击 <strong>安全协议：</strong> 语法、语义、规则 自然语言理解（AI） <strong>一次性口令认证：</strong> 1.直接存放明文 2.哈希加密（随机数加盐） 3.算n次哈希（害怕中间人攻击，直接把第一次哈希值得到） <strong>可靠性问题：</strong>拜占庭将军问题 <strong>匿名通信：</strong>抛币协议，密码员就餐问题</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/13/e7-bd-91-e7-bb-9c-e5-ae-89-e5-85-a8-e8-af-be-e7-ac-94-e8-ae-b0-of-shijie-zhou-2/" data-id="cjv80bews001ga0et8hywguiu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e8-bf-81-e7-a7-bb-e5-ae-8c-e6-88-90-ef-bc-81" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/06/e8-bf-81-e7-a7-bb-e5-ae-8c-e6-88-90-ef-bc-81/" class="article-date">
  <time datetime="2018-12-06T15:49:34.000Z" itemprop="datePublished">2018-12-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/c-plus-plus-2016/">c_plus_plus_2016</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/06/e8-bf-81-e7-a7-bb-e5-ae-8c-e6-88-90-ef-bc-81/">迁移完成！</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>两年的竞赛生涯，汇聚为22篇题解，以纪念我的NOIP之路。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/06/e8-bf-81-e7-a7-bb-e5-ae-8c-e6-88-90-ef-bc-81/" data-id="cjv80bewj000xa0eto9t4vct6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-sbt-e6-80-bb-e7-bb-93" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/06/sbt-e6-80-bb-e7-bb-93/" class="article-date">
  <time datetime="2018-12-06T15:47:22.000Z" itemprop="datePublished">2018-12-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/c-plus-plus-2016/">c_plus_plus_2016</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/06/sbt-e6-80-bb-e7-bb-93/">SBT总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="SBT节点大小平衡树总结"><a href="#SBT节点大小平衡树总结" class="headerlink" title="SBT节点大小平衡树总结"></a>SBT节点大小平衡树总结</h1><p><strong>SBT是二叉查找树的优化。</strong> <strong>与二叉平衡树AVL类似，我们定义一棵树：</strong></p>
<ol>
<li><strong>这棵树的size为这棵树所有节点的个数</strong></li>
<li><strong>每棵子树的大小不小于其兄弟的子树大小</strong></li>
</ol>
<p><strong>即s[right[t]]≥s[left[left[t]]],s[right[left[t]]] 且 s[left[t]]≥s[right[right[t]]], s[left[right[t]]]</strong> <strong>如果插入结点后不满足SBT性质，那么递归修复这棵树的性质，通过旋转达到目的。</strong>  <strong>voidRight_Rotate(int &amp;t){</strong> <strong>       int k=left[t];</strong> <strong>       left[t]=right[k];</strong> <strong>       right[k]=t;</strong> <strong>       s[k]=s[t];</strong> <strong>       s[t]=s[left[t]]+s[right[k]]+1;</strong> <strong>       t=k;</strong> <strong>       return;</strong> <strong>}</strong> <strong>voidLeft_Rotate(int &amp;t){</strong> <strong>       int k=right[t];</strong> <strong>       right[t]=left[k];</strong> <strong>       left[k]=t;</strong> <strong>       s[k]=s[t];</strong> <strong>       s[t]=s[left[k]]+s[right[t]]+1;</strong> <strong>       t=k;</strong> <strong>       return;</strong> <strong>}</strong> <strong>这里可以运用小技巧，在传入变量的时候传入指针，修改变量的同时也修改了原来根节点的值</strong>  <strong>怎么判断旋转的方式？用Maintain函数，形参为根节点与变量flag，false表示当前考虑的是左边的结点 true是右边的结点。其中我们应该判断四个子节点和根节点是否需要修复，但是“左右”，“右左”的情况被证明已经被根节点的修复操作所判断，又少了两个操作</strong> <strong>voidMaintain(int &amp;t,bool flag){</strong> <strong>       if(flag==false){</strong> <strong>              if(s[left[left[t]]]&gt;s[right[t]])</strong> <strong>                     Right_Rotate(t);</strong> <strong>              elseif(s[right[left[t]]]&gt;s[right[t]]){</strong> <strong>                     Left_Rotate(left[t]);</strong> <strong>                     Right_Rotate(t);</strong> <strong>}else return;//一定记住返回</strong> <strong>       }else{</strong> <strong>              if(s[right[right[t]]]&gt;s[left[t]])</strong> <strong>                     Left_Rotate(t);</strong> <strong>              else if(s[left[right[t]]]&gt;s[left[t]]){</strong> <strong>                     Right_Rotate(right[t]);</strong> <strong>                     Left_Rotate(t);</strong> <strong>}else return;//一定记住返回</strong> <strong>       }</strong> <strong>       Maintain(left[t],false);</strong> <strong>       Maintain(right[t],true);</strong> <strong>       Maintain(t,false);</strong> <strong>       Maintain(t,true);</strong> <strong>}</strong>  <strong>插入操作：插入元素后修复整棵树</strong> <strong>voidInsert(int &amp;t,int k){</strong> <strong>       if(t==0){//新结点</strong> <strong>              key[++cnt]=k;</strong> <strong>              s[cnt]=1;</strong> <strong>              t=cnt;</strong> <strong>              left[cnt]=right[cnt]=0;</strong> <strong>       }</strong> <strong>       else{</strong> <strong>              s[t]++;</strong> <strong>              if(k&lt;key[t]) Insert(left[t],k);</strong> <strong>              else Insert(right[t],k);</strong> <strong>              Maintain(t,k&gt;=key[t]);</strong> <strong>       }</strong> <strong>}</strong>  <strong>找前驱：</strong> <strong>intPred(int rt,int k){//找前驱</strong> <strong>       if(rt==0) return k;</strong> <strong>       if(k&lt;key[rt]) return Pred(left[rt],k);//如果仍然不是前驱，就继续往前找</strong> <strong>       else return Pred(right[rt],k);</strong> <strong>}</strong>  <strong>找后继：</strong> <strong>intSucc(int rt,int k){//找后继</strong> <strong>       if(rt==0) return k;</strong> <strong>       if(k&gt;key[rt]) returnSucc(right[rt],k);</strong> <strong>       else return Succ(left[rt],k)</strong> <strong>}</strong>  <strong>寻找第K小的数</strong> <strong>intselect(int &amp;x,int k)//求第k小数</strong> <strong>{</strong> <strong>   int r = tree[tree[x].left].size + 1;</strong> <strong>   if(r == k) return tree[x].key;</strong> <strong>   else if(r &lt; k) return select(tree[x].right,k - r);</strong> <strong>   else return select(tree[x].left,k);</strong> <strong>}</strong>   <strong>询问某元素在树中是第几大</strong> <strong>intrank(int &amp;x,int key)//求key排第几</strong> <strong>{</strong> <strong>   if(key &lt; tree[x].key)</strong> <strong>       return rank(tree[x].left,key);</strong> <strong>   else if(key &gt; tree[x].key)</strong> <strong>       return rank(tree[x].right,key) + tree[tree[x].left].size +1;</strong> <strong>   return tree[tree[x].left].size + 1;</strong> <strong>}</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mrh1s.top/2018/12/06/sbt-e6-80-bb-e7-bb-93/" data-id="cjv80bewp0019a0et4jyrqrzd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/c-c/">c/c++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-plus-plus-2016/">c_plus_plus_2016</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/project/">project</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/">write up</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/cgctf/">cgctf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/cnss-recruit-201809/">cnss_recruit_201809</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/hgame-20190122/">hgame_20190122</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/nationalCTF-20190421/">nationalCTF_20190421</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/write-up/nctf-20181124/">nctf_20181124</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/牢骚/">牢骚</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/RE-Dynamic/">RE_Dynamic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RE-Static/">RE_Static</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/RE-Dynamic/" style="font-size: 10px;">RE_Dynamic</a> <a href="/tags/RE-Static/" style="font-size: 20px;">RE_Static</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/05/03/Migration-Success/">Migration_Success!</a>
          </li>
        
          <li>
            <a href="/2019/04/28/bbvvmm/">bbvvmm</a>
          </li>
        
          <li>
            <a href="/2019/04/28/e5-8d-97-e4-ba-ac-e9-82-ae-e7-94-b5-e5-a4-a7-e5-ad-a6-re-wxyvm2/">南京邮电大学 RE-WxyVM2</a>
          </li>
        
          <li>
            <a href="/2019/04/13/e5-a3-b3-e7-9b-b8-e5-85-b3/">壳相关</a>
          </li>
        
          <li>
            <a href="/2019/03/22/shinyshot/">ShinyShot!</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 mrh929<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>